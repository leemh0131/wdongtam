<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <meta name=”format-detection” content=”no” />
    <meta property="og:url" content="">
    <meta property="og:title" content="">
    <meta property="og:type" content="">
    <meta property="og:image" content="">
    <meta property="og:description" content="">
    <meta name="title" content="">
    <meta name="Subject" content="">
    <meta name="keywords" content="">
    <meta name="Descript-xion" content="">
    <meta name="Description" content="">

    <link rel="icon" href="" type="image/x-icon" sizes="16x16">
    <link rel="stylesheet" href="css/styles.css">

    <title>우리동네탐정</title>
</head>

<body>
    <div class="wrap">

        <div class="header-page"></div>

        <!-- s:모바일 메뉴 -->
        <div class="offcanvas offcanvas-end" tabindex="-1" id="offcanvasRight" aria-labelledby="offcanvasRightLabel">
            <div class="offcanvas-header">
                <h5>전체메뉴</h5>
                <ul>
                    <li>
                        <a href="#">로그인</a>
                    </li>
                    <li>
                        <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
                    </li>
                </ul>
            </div>
            <div class="offcanvas-body">
                <div class="offcanvas_banner">
                    <img src="img/sample/sample_06.png" alt="">
                </div>
                <div class="menu">
                    <h2>업체가 고민이라면 지금</h2>
                    <ul>
                        <li>
                            <a href="#">
                                <dl>
                                    <dt>
                                        <img src="img/icon/i_detective.png" alt="">
                                    </dt>
                                    <dd>탐정찾기</dd>
                                </dl>
                            </a>
                        </li>
                        <li>
                            <a href="#">
                                <dl>
                                    <dt>
                                        <img src="img/icon/i_secretary.png" alt="">
                                    </dt>
                                    <dd>행정사찾기</dd>
                                </dl>
                            </a>
                        </li>
                        <li>
                            <a href="#">
                                <dl>
                                    <dt>
                                        <img src="img/icon/i_chat_2.png" alt="">
                                    </dt>
                                    <dd>상담의뢰</dd>
                                </dl>
                            </a>
                        </li>
                    </ul>
                </div>
                <div class="notice">
                    <ul>
                        <li>공지사항</li>
                        <li>의뢰상담글을 작성하진 모든분께 스타벅스 아메리카노</li>
                        <li>
                            <button type="button">
                                <img src="img/icon/i_chevron_right_w.png" alt="">
                            </button>
                        </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="sub_wrap">
            <!-- s: 상단광고 -->
            <div class="swiper_wrap mo">
                <div class="swiper mainSwiper02">
                    <div class="swiper-wrapper">
                        <div class="swiper-slide">
                            <a href="javascript:void(0);">
                                <img id="main-center-banner-mo" src="img/sample/sample_02.png" alt="">
                            </a>
                        </div>
                        <div class="swiper-slide">
                            <a href="javascript:void(0);">
                                <img src="img/sample/sample_03.png" alt="">
                            </a>
                        </div>
                        <div class="swiper-slide">
                            <a href="javascript:void(0);">
                                <img src="img/sample/sample_04.png" alt="">
                            </a>
                        </div>
                    </div>
                </div>
            </div>
            <div class="swiper_wrap pc">
                <div class="container">
                    <div class="row mb-3">
                        <div class="col-7">
                            <img id="main-center-banner-pc" src="img/sample/sample_08.png" alt="">
                        </div>
                        <div class="col-5">
                            <div class="row">
                                <div class="col-6">
                                    <img src="img/sample/sample_09.png" alt="">
                                </div>
                                <div class="col-6">
                                    <img src="img/sample/sample_10.png" alt="">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- e: 상단광고 -->

            <!-- -->
            <section class="service_wrap container">
                <h1>고객센터</h1>
                <div class="tab_container">
                    <ul class="tab_nav">
                        <li id="announcement" class="tab_nav_item active">공지사항</li>
                        <li id="asking" class="tab_nav_item">자주묻는질문</li>
                    </ul>
                    <div class="tab_content">
                        <div class="tab_pane active">
                            <table class="basic_table">
                                <thead>
                                    <tr>
                                        <th>제목</th>
                                    </tr>
                                </thead>
                                <tbody id="announcement-list">
                                    <tr class="bg_gray">
                                        <td><span>공지</span>텍스트를 입력해주세요</td>
                                    </tr>
                                    <tr class="bg_gray">
                                        <td><span>공지</span>텍스트를 입력해주세요</td>
                                    </tr>
                                    <tr class="bg_gray">
                                        <td><span>공지</span>텍스트를 입력해주세요</td>
                                    </tr>
                                    <tr>
                                        <td>텍스트를 입력해주세요</td>
                                    </tr>
                                    <tr>
                                        <td>텍스트를 입력해주세요</td>
                                    </tr>
                                    <tr>
                                        <td>텍스트를 입력해주세요</td>
                                    </tr>
                                    <tr>
                                        <td>텍스트를 입력해주세요</td>
                                    </tr>
                                    <tr>
                                        <td>텍스트를 입력해주세요</td>
                                    </tr>
                                    <tr>
                                        <td>텍스트를 입력해주세요</td>
                                    </tr>
                                    <tr>
                                        <td>텍스트를 입력해주세요</td>
                                    </tr>
                                </tbody>
                            </table>
                            <ul class="pagination" id="pagination">
                                <!--<li class="prev">
                                    <img src="img/icon/i_chevron_left.svg" alt="">
                                </li>
                                <li class="active">1</li>
                                <li>2</li>
                                <li>3</li>
                                <li>4</li>
                                <li>5</li>
                                <li class="next">
                                    <img src="img/icon/i_chevron_right.svg" alt="">
                                </li>-->
                            </ul>
                        </div>
                        <div class="tab_pane">
                            <ul class="nested_tab_nav">
                                <li class="nested_tab_nav_item active">일반 고객</li>
                                <li class="nested_tab_nav_item">기업 고객</li>
                            </ul>
                            <div class="nested_tab_content">
                                <div class="nested_tab_pane active">
                                    <div class="accordion">
                                        <div class="accordion_item">
                                            <h3 class="accordion_title"><span>Q.</span>제목을 입력해주세요</h3>
                                            <div class="accordion_content">
                                                <p><span>A.</span>제목을 입력해주세요</p>
                                            </div>
                                        </div>
                                        <div class="accordion_item">
                                            <h3 class="accordion_title"><span>Q.</span>제목을 입력해주세요</h3>
                                            <div class="accordion_content">
                                                <p><span>A.</span>제목을 입력해주세요</p>
                                            </div>
                                        </div>
                                        <div class="accordion_item">
                                            <h3 class="accordion_title"><span>Q.</span>제목을 입력해주세요</h3>
                                            <div class="accordion_content">
                                                <p><span>A.</span>제목을 입력해주세요</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="nested_tab_pane">
                                    <div class="accordion">
                                        <div class="accordion_item">
                                            <h3 class="accordion_title"><span>Q.</span>제목을 입력해주세요</h3>
                                            <div class="accordion_content">
                                                <p><span>A.</span>제목을 입력해주세요</p>
                                            </div>
                                        </div>
                                        <div class="accordion_item">
                                            <h3 class="accordion_title"><span>Q.</span>제목을 입력해주세요</h3>
                                            <div class="accordion_content">
                                                <p><span>A.</span>제목을 입력해주세요</p>
                                            </div>
                                        </div>
                                        <div class="accordion_item">
                                            <h3 class="accordion_title"><span>Q.</span>제목을 입력해주세요</h3>
                                            <div class="accordion_content">
                                                <p><span>A.</span>제목을 입력해주세요</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <section class="ad_wrap">
                <div class="item_area">
                    <h4>스페셜 광고</h4>
                    <div class="swiper_area mo">
                        <div class="swiper special_ad">
                            <div class="swiper-wrapper">

                            </div>
                        </div>
                    </div>

                    <div class="special_wrap pc">
                        <div class="swiper pc_special_ad">
                            <div class="swiper-wrapper">

                            </div>
                            <div class="swiper-pagination"></div>
                        </div>
                    </div>
                </div>
            </section>


        </div>

        <div class="footer-page"></div>

        <div class="fixed_menu mo">
            <div class="fixed_wrap">
                <ul>
                    <li>
                        <a href="#">
                            <dl>
                                <dt>
                                    <img src="img/icon/i_map.png" alt="">
                                </dt>
                                <dd>지역별</dd>
                            </dl>
                        </a>
                    </li>
                    <li>
                        <a href="#">
                            <dl>
                                <dt>
                                    <img src="img/icon/i_sliders.png" alt="">
                                </dt>
                                <dd>분야별</dd>
                            </dl>
                        </a>
                    </li>
                    <li>
                        <a href="#">
                            <dl>
                                <dt>
                                    <img src="img/icon/i_chat.png" alt="">
                                </dt>
                                <dd>상담의뢰</dd>
                            </dl>
                        </a>
                    </li>
                    <li>
                        <a href="#">
                            <dl>
                                <dt>
                                    <img src="img/icon/i_call_center.png" alt="">
                                </dt>
                                <dd>고객센터</dd>
                            </dl>
                        </a>
                    </li>
                    <li>
                        <a href="#">
                            <dl>
                                <dt>
                                    <img src="img/icon/i_person.png" alt="">
                                </dt>
                                <dd>MY</dd>
                            </dl>
                        </a>
                    </li>
                </ul>
            </div>
        </div>
    </div>


    <script src="lib/jquery.min.js"></script>
    <script src="lib/bootstrap.bundle.min.js"></script>
    <script src="lib/swiper-bundle.min.js"></script>
    <script src="js/swiper.js"></script>
    <script src="js/examples.js"></script>
    <script src="js/partnerCommon.js"></script>
    <script>
        $(document).ready(function() {
            $(".header-page").load("/header.html");
            $(".footer-page").load("/footer.html");

            const url = new URL(window.location.href);
            // URLSearchParams 객체
            const urlParams = url.searchParams;
            let askingChk = nvl(urlParams.get('askingChk'));


            let customerService = getCustomerService('local');


            if (nvl(customerService) != '') {
                customerService = nvl(customerService.map);
                console.log("customerService", customerService);
                //배너
                if (nvl(customerService.center_banner_img) != '') {
                    for (let i = 0; i < customerService.center_banner_img.length; i++) {
                        if (customerService.center_banner_img[i].table_id == 'CENTER_BANNER_PC') {
                            $('#main-center-banner-pc').attr('src', customerService.center_banner_img[i].img_url);
                        } else {
                            $('#main-center-banner-mo').attr('src', customerService.center_banner_img[i].img_url);
                        }
                    }
                }

                //광고
                if (nvl(customerService.blurbSpecial) != '') {
                    for (let i = 0; i < customerService.blurbSpecial.length; i++) {
                        let specialHtml =
                            `<div class="swiper-slide">` +
                            `<div class="special_box">` +
                            `<img onError="this.src='img/sample/sample_01.png'" src="` + nvl(customerService.blurbSpecial[i].img_url) + `" alt="">` +
                            `<div class="special_box_info">` +
                            `<h1>` + nvl(customerService.blurbSpecial[i].partner_nm) + `</h1>` +
                            `<p>무료상담 : ` + nvl(customerService.blurbSpecial[i].tel_no) + `</p>` +
                            `<button onClick="blurbDetailPage(this)" id="` + nvl(customerService.blurbSpecial[i].partner_cd) + `" type="button">상세보기</button>` +
                            `</div>` +
                            `</div>` +
                            `</div>`;

                        $(".ad_wrap").find(".swiper-wrapper").append(specialHtml);
                    }

                }

                //공지사항 메인
                $('#announcement-list').empty() // 자식요소 제거
                if (nvl(customerService.getMainNotice) != '') {
                    let list = customerService.getMainNotice;
                    for (let i = 0; i < list.length; i++) {
                        $('#announcement-list').append(`<tr class="bg_gray"><td><span>공지</span>` + list[i].TITLE + `</td></tr>`);
                    }
                }

                //페이징버튼 생성
                if (nvl(customerService.getPaging, 0) > 0) {

                    /* let index = customerService.getPaging;

                    let plus = false;

                    let html  = `<li index="` + index + `" onclick="movement(this)" class="prev">`;
                        html +=  `<img src="img/icon/i_chevron_left.svg" alt="">`;
                        html +=  `</li>`;

                        for(let i = 1; i < index; i++){
                            html += `<li>` + i + `</li>`;

                            if(i == 5){
                                plus = true;
                                break;
                            }
                        }
                        html +=  `<li index="` + index + `" onclick="movement(this)" class="next">`;
                        html +=  `<img src="img/icon/i_chevron_right.svg" alt="">`;
                        html +=  `</li>`;

                        $('.pagination').append(html);*/
                }

            }


            if (askingChk == 'Y') {
                $("#asking").click();
            }

            // 초기 탭 설정
            $(".tab_nav_item:first").addClass("active");
            $(".tab_pane:first").addClass("active");

            // 탭 클릭 이벤트 처리
            $(".tab_nav_item").click(function () {
                $(".tab_nav_item").removeClass("active");
                $(this).addClass("active");

                var tabIndex = $(this).index();
                $(".tab_pane").removeClass("active");
                $(".tab_pane:eq(" + tabIndex + ")").addClass("active");
            });

            // 초기 중첩된 탭 설정
            $(".nested_tab_nav_item:first").addClass("active");
            $(".nested_tab_pane:first").addClass("active");

            // 중첩된 탭 클릭 이벤트 처리
            $(".nested_tab_nav_item").click(function () {
                $(".nested_tab_nav_item").removeClass("active");
                $(this).addClass("active");

                var nestedTabIndex = $(this).index();
                $(".nested_tab_pane").removeClass("active");
                $(".nested_tab_pane:eq(" + nestedTabIndex + ")").addClass("active");
            });

            // 아코디언
            $(".accordion_title").click(function () {
                $(".accordion_content").slideUp();
                $(this).parent().toggleClass("active");
                $(".accordion_item").not($(this).parent()).removeClass("active");
                $(this).next(".accordion_content").slideToggle();
            });

            createPagination(120, 10); // 전체 아이템 수와 페이지당 아이템 수를 전달하여 페이지네이션 생성

        });



        function createPagination(totalItems, itemsPerPage) {
            const totalPages = Math.ceil(totalItems / itemsPerPage);
            const pagination = $('#pagination');
            pagination.html(''); // 기존 페이지네이션 초기화

            const currentPage = 1;
            const pageGroupSize = 5; // 페이지 그룹의 크기

            // 현재 페이지 그룹을 계산
            const currentGroup = Math.ceil(currentPage / pageGroupSize);

            // 이전 그룹의 첫 번째 페이지
            const prevGroupStart = (currentGroup - 1) * pageGroupSize;

            // 다음 그룹의 첫 번째 페이지
            const nextGroupStart = currentGroup * pageGroupSize + 1;

            // 이전 버튼
            if (currentGroup > 1) {
                pagination.append(`
            <li class="prev-group" data-page="${prevGroupStart}">
                <img src="img/icon/i_chevron_left.svg" alt="">
            </li>
        `);
            }

            // 페이지 번호
            for (let i = prevGroupStart + 1; i <= Math.min(totalPages, prevGroupStart + pageGroupSize); i++) {
                if (i === currentPage) {
                    pagination.append(`
                <li class="active" data-page="${i}">${i}</li>
            `);
                } else {
                    pagination.append(`
                <li data-page="${i}">${i}</li>
            `);
                }
            }

            // 다음 버튼
            if (nextGroupStart <= totalPages) {
                pagination.append(`
            <li class="next-group" data-page="${nextGroupStart}">
                <img src="img/icon/i_chevron_right.svg" alt="">
            </li>
        `);
            }

            // 페이지 번호 클릭 이벤트 처리
            pagination.find('li[data-page]').click(function() {
                // 이전 활성 페이지에서 "active" 클래스 제거
                pagination.find('li.active').removeClass('active');

                // 클릭한 페이지에 "active" 클래스 추가
                $(this).addClass('active');

                const pageNumber = $(this).data('page');
                showPage(pageNumber);
            });
        }

        // 페이지 클릭 시 해당 페이지의 내용을 가져옵니다.
        function showPage(pageNumber) {
            // 여기에서 페이지 번호에 따라 API 호출을 수행할 수 있음
            // 예를 들어, Fetch를 사용하여 API에서 데이터 가져오기:
            /*
            fetch(`your-api-url?page=${pageNumber}`)
                .then(response => response.json())
                .then(data => {
                    // 데이터를 사용하여 페이지 업데이트 또는 표시
                });
            */

            // 페이지 업데이트 또는 표시 로직을 추가하세요.
        }





    </script>

</body>

</html>